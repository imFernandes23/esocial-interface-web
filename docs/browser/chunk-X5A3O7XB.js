import{a as c}from"./chunk-VV2HN75Q.js";import{k as a,m as n,q as o,t as l}from"./chunk-H64DG2YF.js";var d=class i{store=l(c);latestId$=new a(this.pickLatestId());pickLatestId(){let t=this.store.list();return t.length?t[0].id:null}refreshLatest(){this.latestId$.next(this.pickLatestId())}extractEventCode(t){if(!t)return null;let e=t.match(/S-\d{3,4}/i);return e?e[0].toUpperCase():null}catalog$=this.latestId$.pipe(n(t=>{if(!t)return null;let e=this.store.get(t);if(!e)return null;let p=new Date(e.createdAt||Date.now()).toISOString(),m=(e.events??[]).filter(s=>!s.isTipos).map(s=>{let r=this.extractEventCode(s.label)||this.extractEventCode(s.fileName)||s.fileName.replace(/\.xsd$/i,""),h=s.label||`Evento ${r}`;return{id:r,title:h,description:s.label||void 0,fileName:s.fileName}});return{setId:e.id,version:e.version,uploadedAt:p,events:m}}));upsertSchema(t){this.store.upsert(t),this.refreshLatest()}removeSchema(t){this.store.remove(t),this.refreshLatest()}getLatestSchema(){let t=this.pickLatestId();return t?this.store.get(t):null}static \u0275fac=function(e){return new(e||i)};static \u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})};export{d as a};
