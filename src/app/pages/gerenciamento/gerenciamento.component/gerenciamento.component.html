  <h2>Gerenciamento</h2>

  <div class="card">
    <h3>Carregar ou escolher esquema</h3>
    <div class="row">
      <label class="btn">
        Upload ZIP de esquemas
        <input type="file" accept=".zip" (change)="onZip($event)" hidden>
      </label>

      <select [(ngModel)]="selectedId">
        <option [ngValue]="null">— escolher salvo —</option>
        <option *ngFor="let s of saved" [value]="s.id">{{ s.id }} ({{ s.createdAt | date:'short' }})</option>
      </select>
      <button (click)="loadSelected()" [disabled]="!selectedId">Carregar</button>
    </div>
  </div>

  <div class="card" *ngIf="schema">
    <h3>Eventos no esquema: <code>{{ schema.id }}</code></h3>
    <p class="muted">* “tipos” não pode ser excluído</p>

    <div class="tools">
      <label class="btn">
        Adicionar arquivo .xsd
        <input type="file" accept=".xsd" (change)="onAddXsd($event)" hidden>
      </label>
      <button class="danger" (click)="removeSchema()">Excluir ESQUEMA inteiro</button>
    </div>

    <div class="list">
      <div class="item" *ngFor="let ev of schema.events">
        <div class="left">
          <!-- <div class="tag">Tag: eSocial</div> -->
          <div class="doc">Doc: {{ ev.isTipos ? 'tipos' : ev.label }}</div>
        </div>
        <div class="right">
          <button (click)="openEvent(ev.fileName)">Abrir</button>
          <button class="danger" (click)="deleteEvent(ev.fileName)" [disabled]="ev.isTipos">Excluir</button>
        </div>
      </div>
    </div>
  </div>